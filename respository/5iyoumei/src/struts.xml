<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
	<package name="luyou" extends="struts-default" namespace="/">
		<interceptors>
			<!-- 登录操作签名拦截器 -->
			<interceptor name="loginSignInterceptor" class="loginSignInterceptor" />
			<!-- 非登录操作签名验证拦截器 -->
			<interceptor name="noLoginSignInterceptor" class="noLoginSignInterceptor" />
			<!-- 选择签名拦截器 -->
			<interceptor name="alternateInterceptor" class="alternateInterceptor" />
			<!-- 登录操作拦截器栈 -->
			<interceptor-stack name="loginInterceptorStack">
				<interceptor-ref name="defaultStack">
					<param name="exception.logEnabled">true</param>
					<param name="exception.logLevel">error</param>
				</interceptor-ref>
				<interceptor-ref name="loginSignInterceptor" />
			</interceptor-stack>
			<!-- 非登录操作拦截器栈 -->
			<interceptor-stack name="beforeloginInterceptorStack">
				<interceptor-ref name="defaultStack">
					<param name="exception.logEnabled">true</param>
					<param name="exception.logLevel">error</param>
				</interceptor-ref>
				<interceptor-ref name="noLoginSignInterceptor" />
			</interceptor-stack>
			<!-- 选择签名拦截器栈 -->
			<interceptor-stack name="alternateInterceptorStack">
				<interceptor-ref name="defaultStack">
					<param name="exception.logEnabled">true</param>
					<param name="exception.logLevel">error</param>
				</interceptor-ref>
				<interceptor-ref name="alternateInterceptor" />
			</interceptor-stack>
		</interceptors>
		<!-- 默认使用非登录操作拦截栈 -->
		<default-interceptor-ref name="beforeloginInterceptorStack" />
		<global-results>
			<result name="index" />
		</global-results>
		<!-- 异常处理 -->
		<global-exception-mappings>
			<exception-mapping result="error" exception="java.lang.Exception" />
		</global-exception-mappings>
		<action name="index">
			<result>/index.jsp</result>
		</action>
		<!-- 注册 -->
		<action name="register" class="registerAction" />

		<!-- 登录 -->
		<action name="login" class="loginAction" />
		<!-- 退出 -->
		<action name="logout" class="logoutAction">
			<interceptor-ref name="loginInterceptorStack" />
		</action>
		<!-- 获取个人信息 -->
		<action name="getUserInfo" class="userInfoAction" method="getUserInfo">
			<interceptor-ref name="loginInterceptorStack" />
		</action>
		<!-- 更新个人信息（不包含头像） -->
		<action name="updateUserInfo" class="userInfoAction" method="updateUserInfo">
			<interceptor-ref name="loginInterceptorStack" />
		</action>
		<!-- 上传头像 -->
		<action name="saveIcon" class="userInfoAction" method="saveIcon">
			<interceptor-ref name="loginInterceptorStack" />
		</action>
		<!-- 上传身份证正面，反面；驾驶证正面，反面 -->
		<action name="savePic" class="userInfoAction" method="saveIcon">
			<interceptor-ref name="loginInterceptorStack" />
		</action>
		<!-- 隐私及用户信息设置 -->
		<action name="settings" class="userSettingsAction" method="settings">
			<interceptor-ref name="loginInterceptorStack" />
		</action>
		<!-- 用户位置上报 -->
		<action name="coordinate" class="coordinateAction" method="coordinate">
			<interceptor-ref name="loginInterceptorStack" />
		</action>
		<!-- 获取用户座驾列表 -->
		<action name="getUserCars" class="userCarsAction" method="getUserCars">
			<interceptor-ref name="loginInterceptorStack" />
		</action>
		<!-- 新增座驾 -->
		<action name="addCar" class="userCarsAction" method="addCar">
			<interceptor-ref name="loginInterceptorStack" />
		</action>
		<!-- 更新座驾 -->
		<action name="updateCar" class="userCarsAction" method="updateCar">
			<interceptor-ref name="loginInterceptorStack" />
		</action>
		<!-- 相同车型用户列表 -->
		<action name="sameCarUserList" class="userCarsAction" method="sameCarUserList">
			<interceptor-ref name="loginInterceptorStack" />
		</action>
		<!-- 用户评价 -->
		<action name="evaluate" class="evaluateAction" method="evaluate">
		    <!-- 
			<interceptor-ref name="loginInterceptorStack" />
		     -->
		</action>
		<action name="evaluateInfo" class="evaluateAction" method="evaluateInfo">
			<interceptor-ref name="loginInterceptorStack" />
		</action>
		<!-- 读取品牌列表 -->
		<action name="getBrandList" class="brandAction" method="getBrandList" />
		<!-- 读取车型列表 -->
		<action name="getMotorcydeTypeList" class="userCarsAction" method="getMotorcydeTypeList" />
		<!-- 读取颜色列表 -->
		<action name="getColorList" class="userCarsAction" method="getColorList" />
		<!-- 读取图片列表 -->
		<action name="getCarImageList" class="userCarsAction" method="getCarImageList" />
		<!-- 读取省份列表 -->
		<action name="getProvinceList" class="districtAction" method="getProvinceList" />
		<!-- 读取城市列表 -->
		<action name="getCityList" class="districtAction" method="getCityList" />
		<!-- 读取区县列表 -->
		<action name="getDistrictList" class="districtAction" method="getDistrictList" />
		<!-- 附近用户 -->
		<action name="near" class="searchAction" method="near" />
		<!-- 查询 -->
		<action name="search" class="searchAction" method="search" />
		<!-- 发送短信验证码 -->
		<action name="sendAuth" class="phoneAuthCodeAction" method="sendAuthCode" />
		<!-- 验证验证码 -->
		<action name="validateAuth" class="phoneAuthCodeAction" method="validateAuthCode" />
		<!-- 修改密码 -->
		<action name="modifyPwd" class="userInfoAction" method="modifyPwd">
			<interceptor-ref name="loginInterceptorStack" />
		</action>
		<!-- 版本控制 -->
		<action name="versionInfo" class="versionControllerAction" />
		<!-- 初始化参数 -->
		<action name="initParams" class="initParamsAction" />
		<!-- 违章查询 -->
		<action name="wzQuery" class="wzQueryAction">
			<interceptor-ref name="loginInterceptorStack" />
		</action>
		<!-- 忘记密码 -->
		<action name="forgetPwd" class="forgetPwd" method="modifyPwd" />

	</package>
	<include file="struts-namespace.xml"></include>
</struts>